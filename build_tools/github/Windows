# Get the Python version of the base image from a build argument
ARG PYTHON_VERSION
FROM winamd64/python:$PYTHON_VERSION-windowsservercore

# Install the requirements
ARG CIBW_TEST_REQUIRES
RUN pip install --upgrade pip
RUN pip install $env:CIBW_TEST_REQUIRES

# Copy and install the Windows wheel
ARG WHEEL
COPY dist/artifact/$WHEEL /tmp/$WHEEL
RUN pip install /tmp/$env:WHEEL

CMD [ "pytest", "--pyargs", "sklearn" ]
